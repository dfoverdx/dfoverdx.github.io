/*! Demeter - Built at 01/10/2018 19:26:42 */
!function(t){var e={};function s(i){if(e[i])return e[i].exports;var o=e[i]={i:i,l:!1,exports:{}};return t[i].call(o.exports,o,o.exports,s),o.l=!0,o.exports}s.m=t,s.c=e,s.d=function(t,e,i){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},s.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(s.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)s.d(i,o,function(e){return t[e]}.bind(null,o));return i},s.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="",s(s.s=4)}([function(t,e){FrankerFaceZ.get().register("addon.ffzap.core",class extends FrankerFaceZ.utilities.module.Module{constructor(...t){super(...t),this.inject("chat"),this.inject("chat.emotes"),this.inject("chat.badges"),this.helpers={26964566:{title:"FFZ:AP Developer"},11819690:{title:"FFZ:AP Helper"},36442149:{title:"FFZ:AP Helper"},29519423:{title:"FFZ:AP Helper"},22025290:{title:"FFZ:AP Helper"},4867723:{title:"FFZ:AP Helper"}},this.supporters={},this.added_supporters=[]}onEnable(){this.log.debug("FFZ:AP's Core module was enabled successfully."),this.initDeveloper(),this.initSupporters()}async initDeveloper(){this.badges.loadBadgeData("addon--ffzap.core--badges-developer",{id:"developer",title:"FFZ:AP Developer",color:"#E4107F",slot:6,image:"https://api.ffzap.com/user/badge/26964566/1",urls:{1:"https://api.ffzap.com/user/badge/26964566/1",2:"https://api.ffzap.com/user/badge/26964566/2",4:"https://api.ffzap.com/user/badge/26964566/3"}}),this.chat.getUser(26964566).addBadge("addon--ffzap.core","addon--ffzap.core--badges-developer")}async fetchSupporters(){const t={id:"supporter",title:"FFZ:AP Supporter",color:"#755000",slot:6,image:"https://api.ffzap.com/user/badge/default/1",urls:{1:"https://api.ffzap.com/user/badge/default/1",2:"https://api.ffzap.com/user/badge/default/2",4:"https://api.ffzap.com/user/badge/default/3"}},e=await fetch("https://api.ffzap.com/supporters");if(e.ok){const s=await e.json();this.badges.loadBadgeData("addon--ffzap.core--badges-supporter",t);for(let e=0;e<s.length;e++){const i=s[e];if(26964566===i.id)continue;const o=this.chat.getUser(i.id),n={title:this.helpers[i.id]&&this.helpers[i.id].title||"FFZ:AP Supporter",color:i.tier>=2&&i.badge_color||t.color,image:`https://api.ffzap.com/user/badge/${i.id}/1`,urls:{1:`https://api.ffzap.com/user/badge/${i.id}/1`,2:`https://api.ffzap.com/user/badge/${i.id}/2`,4:`https://api.ffzap.com/user/badge/${i.id}/3`}};i.tier>=3&&i.badge_is_colored&&(n.no_invert=!0),o.addBadge("addon--ffzap.core","addon--ffzap.core--badges-supporter",n),this.added_supporters.push(i.id)}}}async fetchLegacySupporters(){const t=await fetch("https://cdn.ffzap.com/supporters.json");if(t.ok){const e=await t.json();for(let t=0;t<e.users.length;t++){const s=e.users[t];if(this.added_supporters.includes(s.id))continue;const i=this.chat.getUser(s.id),o={id:"supporter"};s.level>=2&&(o.color=s.badge_color),s.level>=3&&(o.image=`https://cdn.ffzap.com/badges/t3/${s.username}_18.png`,o.urls={1:`https://cdn.ffzap.com/badges/t3/${s.username}_18.png`,2:`https://cdn.ffzap.com/badges/t3/${s.username}_36.png`,4:`https://cdn.ffzap.com/badges/t3/${s.username}_72.png`}),i.addBadge("addon--ffzap.core","addon--ffzap.core--badges-supporter",o)}}}async initSupporters(){await this.fetchSupporters(),await this.fetchLegacySupporters()}}).enable()},function(t,e,s){"use strict";s.r(e);const i=0,o=1,n=2;FrankerFaceZ.get().register("addon.ffzap.betterttv",class extends FrankerFaceZ.utilities.module.Module{constructor(...t){super(...t),this.inject("settings"),this.inject("chat"),this.inject("chat.emotes"),this.inject("chat.badges"),this.inject("site"),this.settings.add("ffzap.betterttv.global_emoticons",{default:!0,ui:{path:"Add-Ons > FFZ:AP > BetterTTV >> Emotes",title:"Global Emotes",description:"Enable to show global BetterTTV emoticons.",component:"setting-check-box"}}),this.settings.add("ffzap.betterttv.override_emoticons",{default:!1,ui:{path:"Add-Ons > FFZ:AP > BetterTTV >> Emotes",title:"Override Emotes",description:"Enable to show override emoticons (like D:).",component:"setting-check-box"}}),this.settings.add("ffzap.betterttv.channel_emoticons",{default:!0,ui:{path:"Add-Ons > FFZ:AP > BetterTTV >> Emotes",title:"Channel Emotes",description:"Enable to show per-channel BetterTTV emoticons.",component:"setting-check-box"}}),this.settings.add("ffzap.betterttv.gif_emoticons_mode",{default:1,ui:{path:"Add-Ons > FFZ:AP > BetterTTV >> Emotes",title:"GIF Emotes",description:"Change the mode of how GIF emoticons are showing up.",component:"setting-select-box",data:[{value:0,title:"Disabled"},{value:1,title:"Enabled (Static GIF Emotes)"},{value:2,title:"Enabled (Animated GIF Emotes)"}]}}),this.settings.add("ffzap.betterttv.pro_emoticons",{default:!0,ui:{path:"Add-Ons > FFZ:AP > BetterTTV >> Emotes",title:"Pro Emotes",description:"Enable to show BetterTTV Pro emoticons.",component:"setting-check-box"}}),this.chat.context.on("changed:ffzap.betterttv.global_emoticons",this.updateEmotes,this),this.chat.context.on("changed:ffzap.betterttv.override_emoticons",this.updateEmotes,this),this.chat.context.on("changed:ffzap.betterttv.channel_emoticons",this.updateEmotes,this),this.chat.context.on("changed:ffzap.betterttv.gif_emoticons_mode",this.updateEmotes,this),this.chat.context.on("changed:ffzap.betterttv.pro_emoticons",()=>{if(this.chat.context.get("ffzap.betterttv.pro_emoticons")){this.socket.connect();for(const t of this.chat.iterateRooms())t&&this.updateChannel(t)}else{for(const t in this.ProUsers)({}).hasOwnProperty.call(this.ProUsers,t)&&this.ProUsers[t].unload();this.ProUsers={},this.socket.disconnectInternal()}},this),this.pro_users={},this.night_subs={},this.socket=!1,this.override_emotes=[":'(","D:"]}onEnable(){this.log.debug("FFZ:AP's BetterTTV module was enabled successfully."),this.on("chat:room-add",this.roomAdd),this.on("chat:room-remove",this.roomRemove),this.addBadges(),this.socket=new class{constructor(t,e){this.parent=t,this.socket=!1,this._looked_up_users=[],this._connected=!1,this._connecting=!1,this._connect_attempts=1,this._joined_channels=[],this._connection_buffer=[],this._events=e}connect(){this.parent.site.getUser()&&(this._connected||this._connecting||(this._connecting=!0,this.parent.log.info("Socket: Connecting to socket server..."),this.socket=new WebSocket("wss://sockets.betterttv.net/ws"),this.socket.onopen=(()=>{if(this.parent.log.info("Socket: Connected to socket server."),this._connected=!0,this._connect_attempts=1,this._connection_buffer.length>0){let t=this._connection_buffer.length;for(;t--;){const e=this._connection_buffer[t];this.joinChannel(e),this.broadcastMe(e)}this._connection_buffer=[]}this.reconnecting&&(this.reconnecting=!1)}),this.socket.onerror=(()=>{this.parent.log.error("Socket: Error from socket server."),this._connect_attempts++,this.reconnect()}),this.socket.onclose=(()=>{this._connected&&this.socket&&(this.parent.log.info("Socket: Lost connection to socket server..."),this._connect_attempts++,this.reconnect())}),this.socket.onmessage=(t=>{let e;try{e=JSON.parse(t.data)}catch(t){this.parent.log.error("Socket: Error parsing message",t)}e&&this._events[e.name]&&(this.parent.log.debug("Socket: Received event",e),this._events[e.name](e.data))})))}reconnect(){this.disconnect(),!1!==this._connecting&&(this._connecting=!1,this.parent.log.info("Socket: Trying to reconnect to socket server..."),setTimeout(()=>{this.reconnecting=!0,this.connect()},Math.random()*(Math.pow(2,this._connect_attempts)-1)*1e4))}disconnect(){if(this.socket)try{this.socket.close()}catch(t){}delete this.socket,this._connected=!1,this._connecting=!1}disconnectInternal(){this.disconnect(),this.parent.log.info("Socket: Disconnected from socket server.")}emit(t,e){this._connected&&this.socket&&this.socket.send(JSON.stringify({name:t,data:e}))}broadcastMe(t){this._connected&&this.parent.site.getUser()&&this.emit("broadcast_me",{name:this.parent.site.getUser().login,channel:t})}joinChannel(t){this._connected?t&&t.length&&(this._joined_channels[t]&&this.partChannel(t),this.emit("join_channel",{name:t}),this._joined_channels[t]=!0):this._connection_buffer.includes(t)||this._connection_buffer.push(t)}partChannel(t){this._connected&&t.length&&(this._joined_channels[t]&&this.emit("part_channel",{name:t}),this._joined_channels[t]=!1)}}(this,this.getSocketEvents()),this.updateGlobalEmotes(),this.chat.context.get("ffzap.betterttv.pro_emoticons")&&this.socket.connect();for(const t of this.chat.iterateRooms())t&&this.updateChannel(t);this.hookBTTVSettingChange()}roomAdd(t){this.updateChannel(t)}roomRemove(t){this.updateChannel(t),this.chat.context.get("ffzap.betterttv.pro_emoticons")&&this.socket.partChannel(t.id)}getSocketEvents(){return{lookup_user:t=>{t.pro&&this.chat.context.get("ffzap.betterttv.pro_emoticons")&&(t.pro&&t.emotes&&(this.pro_users[t.name]?(this.pro_users[t.name].emotes_array=t.emotes,this.pro_users[t.name].loadEmotes()):this.pro_users[t.name]=new class{constructor(t,e,s){this.parent=t,this.username=e,this.emotesArray=s,this.initialize()}initialize(){this._id_emotes=`addon--ffzap.betterttv--emotes-pro-${this.username}`,this.loadEmotes()}loadEmotes(){this.emotes=[];for(let t=0;t<this.emotesArray.length;t++){const e=this.emotesArray[t],s={urls:{1:`https://cdn.betterttv.net/emote/${e.id}/1x`,2:`https://cdn.betterttv.net/emote/${e.id}/2x`,4:`https://cdn.betterttv.net/emote/${e.id}/3x`},id:e.id,name:e.code,width:28,height:28,owner:{display_name:e.channel||"",name:e.channel||""},require_spaces:!0};if("gif"===e.imageType){if(this.parent.getAnimatedEmoteMode()===this.parent.GIF_EMOTES_MODE.DISABLED)continue;this.parent.getAnimatedEmoteMode()===this.parent.GIF_EMOTES_MODE.STATIC&&(s.urls[1]=`https://cache.ffzap.com/${s.urls[1]}`,s.urls[2]=`https://cache.ffzap.com/${s.urls[2]}`,s.urls[4]=`https://cache.ffzap.com/${s.urls[4]}`)}this.emotes.push(s)}const t={emoticons:this.emotes,title:"Personal Emotes",source:"BetterTTV",icon:"https://cdn.betterttv.net/tags/developer.png"};this.emotes.length?(this.parent.emotes.loadSetData(this._id_emotes,t,!0),this.parent.chat.getUser(void 0,this.username).addSet("addon--ffzap.betterttv",this._id_emotes)):this.parent.emotes.unloadSet(this._id_emotes)}unload(){this.parent.emotes.unloadSet(this._id_emotes)}}(this,t.name,t.emotes)),t.subscribed&&(this.night_subs[t.name]||(this.night_subs[t.name]=!0,this.chat.getUser(void 0,t.name).addSet("addon--ffzap.betterttv","addon--ffzap.betterttv--emotes-special-night"))))}}}hookBTTVSettingChange(t=0){window.BetterTTV?window.BetterTTV.settings.on("changed.bttvGIFEmotes",()=>this.updateEmotes()):setTimeout(this.hookBTTVSettingChange.bind(this,t),1e3)}getAnimatedEmoteMode(){let t=this.chat.context.get("ffzap.betterttv.gif_emoticons_mode");return window.BetterTTV&&window.BetterTTV.settings.get("bttvGIFEmotes")&&t!==i&&(t=n),t}async addBadges(t=0){const e=await fetch("https://api.betterttv.net/2/badges");if(e.ok){const t=await e.json(),s=[],i=t.types,o=t.badges;let n=i.length;for(;n--;){const t=i[n],e={id:`bttv-${t.name}`,slot:21,image:t.svg,svg:!0,title:t.description,no_invert:!0};s[t.name]=!0,this.badges.loadBadgeData(`addon--ffzap.betterttv--badges-bttv-${t.name}`,e)}for(n=o.length;n--;){const t=o[n];s[t.type]&&(this.log.debug(`Adding badge "${t.type}" for user "${t.name}".`),this.chat.getUser(void 0,t.name).addBadge("addon--ffzap.betterttv",`addon--ffzap.betterttv--badges-bttv-${t.type}`))}}else{if(404===e.status)return;const s=(t||0)+1;s<12&&(this.log.error("Failed to fetch badges. Trying again in 5 seconds."),setTimeout(this.addBadges.bind(this,s),5e3))}}async updateGlobalEmotes(t=0){const e="addon--ffzap.betterttv--emotes-global";if(this.emotes.removeDefaultSet("addon--ffzap.betterttv",e),this.emotes.unloadSet(e),!this.chat.context.get("ffzap.betterttv.global_emoticons"))return;const s=await fetch("https://api.betterttv.net/2/emotes");if(s.ok){const t=await s.json(),n=[],a=[],c=[],{emotes:r,urlTemplate:h}=t;let d,l=r.length;for(;l--;){const t=r[l],e=/[^A-Za-z0-9]/.test(t.regex),s={id:t.id,urls:{1:t.url},name:t.code,width:t.width,height:t.height,require_spaces:e},d=`https:${h.replace("{{id}}",s.id)}`;if(s.urls={1:d.replace("{{image}}","1x"),2:d.replace("{{image}}","2x"),4:d.replace("{{image}}","3x")},-1!==this.override_emotes.indexOf(s.name))a.push(s);else{if("gif"===t.imageType){if(this.getAnimatedEmoteMode()===i)continue;this.getAnimatedEmoteMode()===o&&(s.urls[1]=`https://cache.ffzap.com/${s.urls[1]}`,s.urls[2]=`https://cache.ffzap.com/${s.urls[2]}`,s.urls[4]=`https://cache.ffzap.com/${s.urls[4]}`)}t.restrictions&&"night"===t.restrictions.emoticonSet?c.push(s):n.push(s)}}c.length>0&&(d={emoticons:c,title:"Night (Legacy)",source:"BetterTTV",icon:"https://cdn.betterttv.net/tags/developer.png",sort:50},this.emotes.loadSetData("addon--ffzap.betterttv--emotes-special-night",d));let p=[];if(p=p.concat(n),this.chat.context.get("ffzap.betterttv.override_emoticons")&&(p=p.concat(a)),0===p.length)return;d={emoticons:p,title:"Global Emotes",source:"BetterTTV",icon:"https://cdn.betterttv.net/tags/developer.png",_type:1},this.emotes.addDefaultSet("addon--ffzap.betterttv",e,d)}else{if(404===s.status)return;const e=(t||0)+1;e<12&&(this.log.error("Failed to fetch global emotes. Trying again in 5 seconds."),setTimeout(this.updateGlobalEmotes.bind(this,e),5e3))}}async updateChannel(t,e=0){const s=`addon--ffzap.betterttv--channel-${t.id}`;if(t.removeSet("addon--ffzap.betterttv",s),this.emotes.unloadSet(s),this.chat.context.get("ffzap.betterttv.pro_emoticons")&&this.socket.joinChannel(t.login),!this.chat.context.get("ffzap.betterttv.channel_emoticons"))return;const a=await fetch(`https://api.betterttv.net/2/channels/${t.login}`);if(a.ok){const e=[],{emotes:c,bots:r}=await a.json();for(const e of r)t.getUser(null,e).addBadge("ffz",2);let h=c.length;for(;h--;){const s=/[^A-Za-z0-9]/.test(c[h].code),a=c[h],{id:r}=a,d={urls:{1:`https://cdn.betterttv.net/emote/${r}/1x`,2:`https://cdn.betterttv.net/emote/${r}/2x`,4:`https://cdn.betterttv.net/emote/${r}/3x`},id:r,name:a.code,width:28,height:28,owner:{display_name:a.channel||t.id,name:a.channel},require_spaces:s};if("gif"===a.imageType)switch(this.getAnimatedEmoteMode()){case i:break;case o:d.urls[1]=`https://cache.ffzap.com/${d.urls[1]}`,d.urls[2]=`https://cache.ffzap.com/${d.urls[2]}`,d.urls[4]=`https://cache.ffzap.com/${d.urls[4]}`,e.push(d);break;case n:default:e.push(d)}else e.push(d)}if(!e.length)return;const d={emoticons:e,title:"Channel Emotes",source:"BetterTTV",icon:"https://cdn.betterttv.net/tags/developer.png",_type:1};e.length&&t.addSet("addon--ffzap.betterttv",s,d)}else{if(404===a.status)return;const s=(e||0)+1;s<12&&(this.log.error("Failed to fetch channel emotes. Trying again in 5 seconds."),setTimeout(this.updateChannel.bind(this,t,s),5e3))}}updateEmotes(){this.updateGlobalEmotes();for(const t of this.chat.iterateRooms())t&&this.updateChannel(t)}}).enable()},function(t,e,s){"use strict";s.r(e);class i{constructor(t,e,s,i){this.parent=t,this.username=e,this.emote_ids=s,this.badges=[],i&&this.addUserBadge(i),this.initialize()}initialize(){this._id_emotes=`addon--ffzap.gamewisp--emotes-sub-${this.username}`,this.loadEmotes(),this.reloadBadges()}addUserBadge(t){this.badges.push(t)}loadEmotes(){if(this.emotes={},this.channels=[],this.emote_ids){for(let t=0;t<this.emote_ids.length;t++){const e=this.parent.getEmote(this.emote_ids[t]);e&&(this.emotes[e.gw_channel]||(this.emotes[e.gw_channel]=[]),this.emotes[e.gw_channel].push(e))}if(this.parent.chat.context.get("ffzap.gamewisp.sub_emoticons"))for(const t in this.emotes)if(this.emotes.hasOwnProperty(t)){const e=this.emotes[t];this._emote_sets||(this._emote_sets=[]),this._emote_sets[t]={emoticons:e,title:t,source:"GameWisp",icon:"https://cdn.ffzap.com/gamewisp/icon_16x.png",sort:50,has_prefix:2,_set_name:`${this._id_emotes}-${t}`},e.length?(this.parent.emotes.loadSetData(this._emote_sets[t]._set_name,this._emote_sets[t],!0),this.parent.chat.getUser(void 0,this.username).addSet("addon--ffzap.gamewisp",this._emote_sets[t]._set_name)):this.parent.emotes.unloadSet(this._emote_sets[t]._set_name)}}}reloadBadges(){if(this.badges&&0!==this.badges.length)for(let t=0;t<this.badges.length;t++){const e=this.badges[t],s=this.parent.getBadge(e);if(!s)continue;const i=this.parent.chat.getRoom(void 0,s.twitch_channel,!0);if(i&&(i.getUser(void 0,this.username).removeBadge("addon--ffzap.gamewisp","addon--ffzap.gamewisp--badges-subscriber"),this.parent.chat.context.get("ffzap.gamewisp.sub_badges")&&(i.getUser(void 0,this.username).addBadge("addon--ffzap.gamewisp","addon--ffzap.gamewisp--badges-subscriber",s.ffz_data),this._emote_sets&&this._emote_sets[s.gw_channel]))){const t=this._emote_sets[s.gw_channel];t.icon=s.ffz_data.image,t.emoticons&&t.emoticons.length>0&&this.parent.emotes.loadSetData(t._set_name,t)}}}unload(){for(let t=0;t<this.channels.length;t++){const e=this.parent.chat.getRoom(void 0,this.channels[t],!0);e&&e.getUser(void 0,this.username).removeBadge("addon--ffzap.gamewisp","addon--ffzap.gamewisp--badges-subscriber")}}}FrankerFaceZ.get().register("addon.ffzap.gamewisp",class extends FrankerFaceZ.utilities.module.Module{constructor(...t){super(...t),this.inject("settings"),this.inject("chat"),this.inject("chat.emotes"),this.inject("chat.badges"),this.inject("site"),this.settings.add("ffzap.gamewisp.global_emoticons",{default:!0,ui:{path:"Add-Ons > FFZ:AP > GameWisp >> Emotes",title:"Global Emotes",description:"Enable to show global GameWisp emoticons.",component:"setting-check-box"}}),this.settings.add("ffzap.gamewisp.sub_emoticons",{default:!0,ui:{path:"Add-Ons > FFZ:AP > GameWisp >> Emotes",title:"Subscriber Emotes",description:"Enable to show GameWisp subscriber emoticons.",component:"setting-check-box"}}),this.settings.add("ffzap.gamewisp.sub_badges",{default:!0,ui:{path:"Add-Ons > FFZ:AP > GameWisp >> Badges",title:"Subscriber Badges",description:"Enable to show GameWisp subscriber badges.",component:"setting-check-box"}}),this.settings.add("ffzap.gamewisp.badges_override_twitch",{default:!0,ui:{path:"Add-Ons > FFZ:AP > GameWisp >> Badges",title:"Subscriber Badges Override Twitch Badges",description:"Enable to let GameWisp subscriber badges override the Twitch subscriber badges.",component:"setting-check-box"},changed:t=>{if(this.chat.context.get("ffzap.gamewisp.sub_badges")){for(const e in this.sub_badges)if({}.hasOwnProperty.call(this.sub_badges,e)){const s=this.sub_badges[e];s.ffz_data.replaces=t?"subscriber":void 0,s.ffz_data.slot=t?25:26}for(const t in this.subs)({}).hasOwnProperty.call(this.subs,t)&&this.subs[t].reloadBadges()}}}),this.chat.context.on("changed:ffzap.gamewisp.global_emoticons",this.updateGlobalEmotes,this),this.chat.context.on("changed:ffzap.gamewisp.sub_emoticons",t=>{if(t){this.socket.connect();for(const t of this.chat.iterateRooms())t&&this.roomAdd(t)}else{for(const t in this.subs)({}).hasOwnProperty.call(this.subs,t)&&this.subs[t].unload();this.subs={}}},this),this.chat.context.on("changed:ffzap.gamewisp.sub_badges",t=>{if(t){this.socket.connect();for(const t in this.subs)({}).hasOwnProperty.call(this.subs,t)&&this.subs[t].reloadBadges()}},this),this.chat.context.on("changed:ffzap.gamewisp.badges_override_twitch",t=>{if(this.chat.context.get("ffzap.gamewisp.sub_badges")){for(const e in this.sub_badges)if({}.hasOwnProperty.call(this.sub_badges,e)){const s=this.sub_badges[e];s.ffz_data.replaces=t?"subscriber":void 0,s.ffz_data.slot=t?25:26}for(const t in this.subs)({}).hasOwnProperty.call(this.subs,t)&&this.subs[t].reloadBadges()}},this),this.socket=!1,this.sub_emotes={},this.sub_badges={},this.channels=[],this.subbed_to={},this.subs={}}onLoad(){const t=document.createElement("script");t.type="text/javascript",t.src="https://cdnjs.cloudflare.com/ajax/libs/msgpack-lite/0.1.26/msgpack.min.js",document.head.appendChild(t)}onEnable(){this.log.debug("FFZ:AP's GameWisp module was enabled successfully."),this.on("chat:room-add",this.roomAdd),this.on("chat:room-remove",this.roomRemove),this.socket=new class{constructor(t,e){this.parent=t,this.socket=!1,this._looked_up_users=[],this._connected=!1,this._connecting=!1,this._connect_attempts=1,this._joined_channels=[],this._connection_buffer=[],this._events=e}connect(){this.parent.site.getUser()&&(this._connected||this._connecting||(this._connecting=!0,this.parent.log.info("Socket: Connecting to socket server..."),this.socket=new WebSocket("wss://emotes.gamewisp.com/"),this.socket.binaryType="arraybuffer",this._joined_channels=[],this.socket.onopen=(()=>{if(this.parent.log.info("Socket: Connected to socket server."),this._connected=!0,this._connect_attempts=1,this._connection_buffer.length>0){let t=this._connection_buffer.length;for(;t--;){const e=this._connection_buffer[t];this.joinRoom(e)}this._connection_buffer=[]}this.reconnecting&&(this.reconnecting=!1)}),this.socket.onerror=(()=>{this.parent.log.error("Socket: Error from socket server."),this._connecting&&(this.reconnecting=!1),this._connect_attempts++,this.reconnect()}),this.socket.onclose=(()=>{this._connected&&this.socket&&(this.parent.log.error("Socket: Lost connection to socket server..."),this._connect_attempts++,this.reconnect())}),this.socket.onmessage=(t=>{const e=(t=msgpack.decode(new Uint8Array(t.data))).name;e&&this._events[e]&&this._events[e](t.data)})))}reconnect(){this.disconnect(),this.reconnecting||(this.reconnecting=!1,this.parent.log.info("Socket: Trying to reconnect to socket server..."),setTimeout(()=>{this.reconnecting=!0,this.connect()},Math.random()*(Math.pow(2,this._connect_attempts)-1)*1e4))}disconnect(){if(this.socket)try{this.socket.close()}catch(t){}delete this.socket,this._connected=!1,this._connecting=!1}disconnectInternal(){this.disconnect(),this.parent.log.info("Socket: Disconnected from socket server.")}emit(t,e){this._connected&&this.socket&&this.socket.send(JSON.stringify({name:t,data:e}))}joinRoom(t){(this.parent.chat.context.get("ffzap.gamewisp.sub_emoticons")||this.parent.chat.context.get("ffzap.gamewisp.sub_badges"))&&(this._connected?this.parent.site.getUser()&&this.parent.site.getUser().login&&t&&t.length&&(this._joined_channels[t]&&this.leaveRoom(t),this.emit("join_room",{user:this.parent.site.getUser().login,room:t,mode:["emotes","badges"],sub_data:!0}),this._joined_channels[t]=!0):this._connection_buffer.includes(t)||this._connection_buffer.push(t))}leaveRoom(t){this._connected&&t.length&&(this._joined_channels[t]&&this.emit("leave_room",{user:this.parent.site.getUser().login,name:t}),this._joined_channels[t]=!1)}}(this,this.getSocketEvents()),this.updateGlobalEmotes(),(this.chat.context.get("ffzap.gamewisp.sub_emoticons")||this.chat.context.get("ffzap.gamewisp.sub_badges"))&&this.socket.connect(),this.badges.loadBadgeData("addon--ffzap.gamewisp--badges-subscriber",{id:"gamewisp-subscriber",title:"GameWisp Subscriber",image:"https://cdn.ffzap.com/gamewisp/icon_16x.png",no_invert:!0});for(const t of this.chat.iterateRooms())t&&this.roomAdd(t)}roomAdd(t){this.socket.joinRoom(t.login)}roomRemove(t){const e=this.channels.indexOf(t.login);-1!==e&&this.channels.splice(e),this.subbed_to[t.login]&&(this.subbed_to[t.login]=null),this.socket.leaveRoom(t.login)}async updateGlobalEmotes(t=0){const e="addon--ffzap.gamewisp--emotes-global";if(this.emotes.removeDefaultSet("addon--ffzap.gamewisp",e),this.emotes.unloadSet(e),!this.chat.context.get("ffzap.gamewisp.global_emoticons"))return;const s=await fetch("https://api.gamewisp.com/pub/v1/emote/global");if(s.ok){const t=[],i=(await s.json()).data;for(let e=0;e<i.length;e++){const s=i[e],o={urls:{1:s.image_asset.data.content.small,2:s.image_asset.data.content.medium,4:s.image_asset.data.content.large},name:s.shortcode,id:s.image_asset.data.id,width:28,height:28,require_spaces:!0};t.push(o)}const o={emoticons:t,title:"Global Emotes",source:"GameWisp",icon:"https://cdn.ffzap.com/gamewisp/icon_16x.png",sort:101,_type:1};this.emotes.addDefaultSet("addon--ffzap.gamewisp",e,o)}else{if(404===s.status)return;const e=(t||0)+1;e<12&&(this.log.error("Failed to fetch global emotes. Trying again in 5 seconds."),setTimeout(this.updateGlobalEmotes.bind(this,e),5e3))}}addEmote(t,e,s,i,o){if(this.sub_emotes[t])return this.sub_emotes[t];const n=o.replace(/_(\d*)x(\d*)\.png/,"");return this.sub_emotes[t]={urls:{1:o,2:`${n}_56x56.png`,4:`${n}_112x112.png`},name:e,width:28,height:28,require_spaces:!1,gw_channel:i,id:`${s}-${e}`},this.sub_emotes[t]}getEmote(t){return this.sub_emotes[t]||!1}addBadge(t,e,s,i,o,n){if(this.sub_badges[t])return this.sub_badges[t];if(null==e)return void this.log.debug("Tried to add a badge with an undefined twitch channel!",[t,e,s,o,n]);const a=n.replace(/_(\d*)x(\d*)\.png/,"");return this.sub_badges[t]={twitch_channel:e,gw_channel:s,name:i,tier:o,ffz_data:{id:"gamewisp-subscriber",image:n,title:i,slot:this.chat.context.get("ffzap.gamewisp.badges_override_twitch")?25:26,urls:{1:n,2:`${a}_36x36.png`,4:`${a}_72x72.png`},replace_mode:"keep_title",replaces:this.chat.context.get("ffzap.gamewisp.badges_override_twitch")?"subscriber":void 0}},this.sub_badges[t]}getBadge(t){return this.sub_badges[t]||!1}getSocketEvents(){return{initialize_room:t=>{if(t.gameWispChannel&&t.gameWispChannel.isLaunched&&(this.subbed_to[t.room]={subbed:t.isGameWispSub,gwData:t.gameWispChannel}),t.emotes)for(let e=0;e<t.emotes.length;e++){const s=t.emotes[e];s.name||this.addEmote(s.id,s.code,s.twitch_channel,s.channel,s.url)}if(t.badges)for(let e=0;e<t.badges.length;e++){const s=t.badges[e];this.addBadge(s.id,s.twitch_channel,s.channel,s.name||s.code,s.tier,s.url)}let e=t.userStore;if(e)for(const t in e)if(e.hasOwnProperty(t)){const s=e[t];s.length>0&&(this.subs[t]?(this.subs[t].emote_ids=s,this.subs[t].loadEmotes()):this.subs[t]=new i(this,t,s,null))}if(e=t.userStoreBadges)for(const t in e)if(e.hasOwnProperty(t)){const s=e[t];this.subs[t]?(this.subs[t].addUserBadge(s),this.subs[t].reloadBadges()):this.subs[t]=new i(this,t,null,s)}},update_room:t=>{if(t.emotes)for(let e=0;e<t.emotes.length;e++){const s=t.emotes[e];s.name||this.addEmote(s.id,s.code,s.twitch_channel,s.channel,s.url)}const e=t.user;if(e&&e.emoteIDs&&e.emoteIDs.length>0){const t=e.emoteIDs;this.subs[e.name]?(this.subs[e.name].emote_ids=t,this.subs[e.name].loadEmotes()):this.subs[e.name]=new i(this,e.name,t,null)}},leave_room:()=>{}}}}).enable()},function(t,e,s){"use strict";s.r(e);class i{constructor(t=0){if(this._set=new Set,!Number.isInteger(t)||t<0)throw new Error(`maxSize must be a non-negative integer.  Found ${t}`);this._maxSize=t}push(t){this._set.delete(t),this._set.add(t),this._maxSize>0&&this._set.size>this._maxSize&&this._set.delete(this._set[Symbol.iterator].next().value)}getSnapshot(){return new o(this._set)}get length(){return this._set.size}get maxSize(){return this._maxSize}set maxSize(t){if(!Number.isInteger(t)||t<0)throw new Error(`maxSize must be a non-negative integer.  Found ${t}`);return this._maxSize=t}}class o extends Array{constructor(...t){super(...t),this.i=this.length-1}*prev(){if(this.length)for(;;)this.i=(this.i+1)%this.length,yield this[this.i]}*next(){if(this.length)for(;;)yield this[this.i],this.i--,this.i<0&&(this.i=this.length-1)}}s.d(e,"default",function(){return a});const n={enableReply:"ffzap.chatshortcuts.enable_reply_keyboard_shortcut",enableAtStreamer:"ffzap.chatshortcuts.enable_at_streamer_keyboard_shortcut",enableAtLastChatter:"ffzap.chatshortcuts.enable_at_last_chatter_keyboard_shortcut"};class a extends FrankerFaceZ.utilities.module.Module{constructor(...t){super(...t),this.inject("settings"),this.inject("chat"),this.inject("site.fine"),this.ChatInput=this.fine.define("chat-input",t=>t&&t.setChatInputRef,FrankerFaceZ.get().site.constructor.CHAT_ROUTES),this._lastMentioners=new i,this._lastChatters=new i,this.settings.add(n.enableReply,{default:!0,ui:{path:"Add-Ons > FFZ:AP > Chat Shorcuts >> Keyboard Shortcuts",title:"Reply keyboard shortcut",description:"Enable <kbd>alt</kbd>+<kbd>r</kbd> keyboard shortcut to reply to people who've @'d you in chat.",component:"setting-check-box"}}),this.settings.add(n.enableAtStreamer,{default:!0,ui:{path:"Add-Ons > FFZ:AP > Chat Shorcuts >> Keyboard Shortcuts",title:"@streamer keyboard shortcut",description:"Enable <kbd>alt</kbd>+<kbd>s</kbd> keyboard shortcut to @ the current streamer.",component:"setting-check-box"}}),this.settings.add(n.enableAtLastChatter,{default:!0,ui:{path:"Add-Ons > FFZ:AP > Chat Shorcuts >> Keyboard Shortcuts",title:"@last_chatter keyboard shortcut",description:"Enable <kbd>alt</kbd>+<kbd>a</kbd> keyboard shortcut to @ the last people to speak in chat.",component:"setting-check-box"}})}onEnable(){this.log.debug("FFZ:AP's chatshortcuts module was enabled successfully."),document.addEventListener("keydown",t=>{if(18===(window.event?event.keyCode:t.keyCode)){let t={lastMentioners:this._lastMentioners.getSnapshot(),lastChatters:this._lastChatters.getSnapshot()};const e=s=>{if(18===(window.event?event.keyCode:s.keyCode))return this._confirmInsert(),void document.removeEventListener("keyup",e);switch(s.key){case"r":this.settings.get(n.enableReply)&&t.lastMentioners.length&&this._insertFromQueue(t.lastMentioners,s.shiftKey);break;case"a":this.settings.get(n.enableAtLastChatter)&&this._insertFromQueue(t.lastChatters,s.shiftKey);break;case"s":this.settings.get(n.enableAtStreamer)&&this._atStreamer()}};document.addEventListener("keyup",e)}}),this.chat.on("chat:receive-message",t=>{this._lastChatters.push(t.message.user.userDisplayName),t.message.mentioned&&this._lastMentioners.push(t.message.user.userDisplayName)})}_insertFromQueue(t,e){t.length&&(e?this._insertAtUser(t.prev().value):this._insertAtUser(t.next().value))}_atStreamer(){this._insertAtUser(this.chat.context.get("context.channel"))}_insertAtUser(t){this._insertIntoChat(`@${t}`)}_insertIntoChat(t){for(let e of Array.from(this.ChatInput.instances).map(t=>t.chatInputRef))c(e,t)}_confirmInsert(t=!0){for(let e of Array.from(this.ChatInput.instances).map(t=>t.chatInputRef))e.selectionStart=e.selectionEnd,t&&c(e," ",!1)}}function c(t,e,s=!0){let i=t.value;const o=t.selectionStart,n=t.selectionEnd;t.value=`${i.slice(0,o)}${e}${i.slice(n)}`,t.selectionEnd=o+e.length,t.selectionStart=s?o:t.selectionEnd}FrankerFaceZ.get().register("addon.ffzap.chatshorcuts",a).enable()},function(t,e,s){s(0),s(1),s(2),s(5),s(3)},function(t,e,s){"use strict";s.r(e);const i={AUTHORIZE:1,PONG:2,CHANNEL_SUBSCRIBE:4,CHANNEL_UNSUBSCRIBE:8,ANNOUNCE_MESSAGE:16},o={READY:1,AUTHORIZED:2,PING:4,CHANNEL_SUBSCRIPTION_ADDED:16,CHANNEL_SUBSCRIPTION_REMOVED:32,USER_CHANNEL_DATA:64},n={EXTENSION_DEV:1,EXTENSION_ADMIN:2,LIRIK_SUB:4};const a=0,c=1;FrankerFaceZ.get().register("addon.ffzap.liriklive",class extends FrankerFaceZ.utilities.module.Module{constructor(...t){super(...t),this.inject("settings"),this.inject("chat"),this.inject("chat.emotes"),this.inject("site"),this.settings.add("ffzap.liriklive.global_emoticons",{default:!0,ui:{path:'Add-Ons > FFZ:AP > LIRIK LIVE @{"description": "LIRIK LIVE idea by OBAN_INTERNET"} >> Emotes',title:"Global Emotes",description:"Enable to show LIRIK LIVE global emotes.",component:"setting-check-box"}}),this.settings.add("ffzap.liriklive.gif_emotes_mode",{default:1,ui:{path:"Add-Ons > FFZ:AP > LIRIK LIVE >> Emotes",title:"GIF Emotes",description:"Change the mode of how GIF emotes are showing up.",component:"setting-select-box",data:[{value:0,title:"Disabled"},{value:1,title:"Enabled (Static GIF Emotes)"},{value:2,title:"Enabled (Animated GIF Emotes)"}]}}),this.settings.add("ffzap.liriklive.sub_emoticons",{default:!0,ui:{path:"Add-Ons > FFZ:AP > LIRIK LIVE >> Emotes",title:"Subscriber Emotes",description:"Enable to show additional LIRIK LIVE subscriber emotes.",component:"setting-check-box"}}),this.chat.context.on("changed:ffzap.liriklive.global_emoticons",this.updateEmotes,this),this.chat.context.on("changed:ffzap.liriklive.gif_emotes_mode",this.updateEmotes,this),this.chat.context.on("changed:ffzap.liriklive.sub_emoticons",this.updateEmotes,this),this.socket=!1,this._last_emote_id=0}onEnable(){this.log.debug("FFZ:AP's LirikLIVE module was enabled successfully."),this.updateEmotes(),this.socket=new class{constructor(t){this.parent=t,this.socket=!1,this._connected=!1,this._connecting=!1,this._ready=!1,this._connect_attempts=1,this._joined_channels=[],this._connection_buffer=[]}connect(){this.parent.site.getUser()&&(this._connected||this._connecting||(this._connecting=!0,this.parent.log.info("Socket: Connecting to socket server..."),this.socket=new WebSocket("wss://lirik.hnlbot.com/ws"),this.socket.binaryType="arraybuffer",this._joined_channels=[],this.socket.onopen=(()=>{if(this.parent.log.info("Socket: Connected to socket server."),this._connected=!0,this._connect_attempts=1,this.reconnecting){for(const t of this.parent.chat.iterateRooms())t&&this.parent.roomAdd(t);this.reconnecting=!1}}),this.socket.onerror=(()=>{this.parent.log.error("Socket: Error from socket server."),this._connecting&&(this.reconnecting=!1),this._connect_attempts++,this.reconnect()}),this.socket.onclose=(()=>{this._connected&&this.socket&&(this.parent.log.error("Socket: Lost connection to socket server..."),this._connect_attempts++,this.reconnect())}),this.socket.onmessage=(t=>{let e=JSON.parse(t.data);e=e instanceof Array?e:[e];for(const t of e)switch(t.t){case o.READY:if(this._ready=!0,this._connection_buffer.length>0){let t=this._connection_buffer.length;for(;t--;){const e=this._connection_buffer[t];this.joinRoom(e)}this._connection_buffer=[]}break;case o.PING:this.emit(i.PONG);break;case o.CHANNEL_SUBSCRIPTION_ADDED:{if(!t.c_d)continue;const{u_id:e,f:s,s_m:i}=t.c_d;if(s&n.LIRIK_SUB){const t=this.parent.chat.getUser(e);t.addSet("addon--ffzap.liriklive","addon--ffzap.liriklive--emotes-subscriber"),i>=12&&t.addSet("addon--ffzap.liriklive","addon--ffzap.liriklive--emotes-restricted")}break}case o.USER_CHANNEL_DATA:{const{u_id:e,f:s,s_m:i}=t.d;if(s&n.LIRIK_SUB){const t=this.parent.chat.getUser(e);t.addSet("addon--ffzap.liriklive","addon--ffzap.liriklive--emotes-subscriber"),i>=12&&t.addSet("addon--ffzap.liriklive","addon--ffzap.liriklive--emotes-restricted")}}}})))}reconnect(){this.disconnect(),this.reconnecting||(this.reconnecting=!1,this.parent.log.info("Socket: Trying to reconnect to socket server..."),setTimeout(()=>{this.reconnecting=!0,this.connect()},Math.random()*(Math.pow(2,this._connect_attempts)-1)*1e4))}disconnect(){if(this.socket)try{this.socket.close()}catch(t){}delete this.socket,this._connected=!1,this._connecting=!1}disconnectInternal(){this.disconnect(),this.parent.log.info("Socket: Disconnected from socket server.")}emit(t,e){this._connected&&this.socket&&this.socket.send(JSON.stringify({t:t,d:e}))}joinRoom(t){if(!this.parent.chat.context.get("ffzap.liriklive.sub_emoticons"))return;if(!t)return;if(!this._connected||!this._ready)return void(this._connection_buffer.includes(t)||this._connection_buffer.push(t));const e=this.parent.site.getUser();e&&e.id&&(this._joined_channels[t]&&this.leaveRoom(t),this.emit(i.CHANNEL_SUBSCRIBE,{u_id:e.id,c_id:t}),this._joined_channels[t]=!0)}announceMessage(t){const e=this.parent.site.getUser();e&&e.id&&this.emit(i.ANNOUNCE_MESSAGE,{c_id:t,u_id:e.id})}leaveRoom(t){this._connected&&(this._joined_channels[t]&&this.emit(i.CHANNEL_UNSUBSCRIBE,{c_id:t}),this._joined_channels[t]=!1)}}(this),this.chat.context.get("ffzap.liriklive.sub_emoticons")&&this.socket.connect(),this.on("chat:room-add",this.roomAdd),this.on("chat:room-remove",this.roomRemove),this.on("chat:pre-send-message",this.preSendMessage);for(const t of this.chat.iterateRooms())t&&this.roomAdd(t)}roomAdd(t){this.socket.joinRoom(t.id)}roomRemove(t){this.socket.leaveRoom(t.id)}preSendMessage(t){if(!this.chat.context.get("ffzap.liriklive.sub_emoticons"))return;const e=this.chat.getRoom(null,t.channel,!0);e&&e.id&&this.socket.announceMessage(e.id)}updateGlobalEmotes(t){const e="addon--ffzap.liriklive--emotes-global";if(this.emotes.removeDefaultSet("addon--ffzap.liriklive",e),this.emotes.unloadSet(e),!this.chat.context.get("ffzap.liriklive.global_emoticons"))return;const s=[],{global:i,gifs:o}=t;if(i)for(const t of i){const e={id:++this._last_emote_id,name:t.code,width:t.width||28,height:t.height||28};t.id?e.urls={1:`https://static-cdn.jtvnw.net/emoticons/v1/${t.id}/1.0`,2:`https://static-cdn.jtvnw.net/emoticons/v1/${t.id}/2.0`,4:`https://static-cdn.jtvnw.net/emoticons/v1/${t.id}/3.0`}:e.urls={1:`https://cdn.ffzap.com/liriklive/normal/${e.name}_1.png`,2:`https://cdn.ffzap.com/liriklive/normal/${e.name}_2.png`,4:`https://cdn.ffzap.com/liriklive/normal/${e.name}_4.png`},s.push(e)}if(o){const t=this.chat.context.get("ffzap.liriklive.gif_emotes_mode");if(t!==a)for(const e of o){const i={id:++this._last_emote_id,urls:{1:`https://cdn.ffzap.com/liriklive/gifs/${e}_1.gif`,2:`https://cdn.ffzap.com/liriklive/gifs/${e}_2.gif`,4:`https://cdn.ffzap.com/liriklive/gifs/${e}_4.gif`},name:e,width:28,height:28,modifier:"lirikRAIN"===e};t===c&&(i.urls[1]=`https://cache.ffzap.com/${i.urls[1]}`,i.urls[2]=`https://cache.ffzap.com/${i.urls[2]}`,i.urls[4]=`https://cache.ffzap.com/${i.urls[4]}`),s.push(i)}}if(0===s.length)return;const n={emoticons:s,title:"Past Emotes",source:"LIRIK LIVE",icon:"https://cdn.ffzap.com/liriklive/icon.png",sort:51,force_global:(t,e)=>e&&"lirik"===e.login};this.emotes.addDefaultSet("addon--ffzap.liriklive",e,n)}updateSubscriberEmotes(t){const e="addon--ffzap.liriklive--emotes-subscriber";if(this.emotes.unloadSet(e),!this.chat.context.get("ffzap.liriklive.sub_emoticons"))return;const s=[],{subscriber:i}=t;if(i)for(const t of i){const e={id:++this._last_emote_id,name:t.code,width:t.width||28,height:t.height||28};t.id?e.urls={1:`https://static-cdn.jtvnw.net/emoticons/v1/${t.id}/1.0`,2:`https://static-cdn.jtvnw.net/emoticons/v1/${t.id}/2.0`,4:`https://static-cdn.jtvnw.net/emoticons/v1/${t.id}/3.0`}:e.urls={1:`https://cdn.ffzap.com/liriklive/normal/${e.name}_1.png`,2:`https://cdn.ffzap.com/liriklive/normal/${e.name}_2.png`,4:`https://cdn.ffzap.com/liriklive/normal/${e.name}_4.png`},s.push(e)}if(0===s.length)return;const o={emoticons:s,title:"Subscriber Emotes",source:"LIRIK LIVE",icon:"https://cdn.ffzap.com/liriklive/icon.png",merge_id:"addon--ffzap.liriklive--emotes-global"};this.emotes.loadSetData(e,o)}updateRestrictedEmotes(t){const e="addon--ffzap.liriklive--emotes-restricted";if(this.emotes.unloadSet(e),!this.chat.context.get("ffzap.liriklive.sub_emoticons"))return;const s=[],{restricted:i}=t;if(i)for(const t of i){const e={id:++this._last_emote_id,name:t.code,width:t.width||28,height:t.height||28};t.id?e.urls={1:`https://static-cdn.jtvnw.net/emoticons/v1/${t.id}/1.0`,2:`https://static-cdn.jtvnw.net/emoticons/v1/${t.id}/2.0`,4:`https://static-cdn.jtvnw.net/emoticons/v1/${t.id}/3.0`}:e.urls={1:`https://cdn.ffzap.com/liriklive/normal/${e.name}_1.png`,2:`https://cdn.ffzap.com/liriklive/normal/${e.name}_2.png`,4:`https://cdn.ffzap.com/liriklive/normal/${e.name}_4.png`},s.push(e)}if(0===s.length)return;const o={emoticons:s,title:"Restricted Emotes",source:"LIRIK LIVE",icon:"https://cdn.ffzap.com/liriklive/icon.png",merge_id:"addon--ffzap.liriklive--emotes-global"};this.emotes.loadSetData(e,o)}async updateEmotes(t=0){if(this._last_emote_id=0,!this.chat.context.get("ffzap.liriklive.global_emoticons")&&!this.chat.context.get("ffzap.liriklive.sub_emoticons"))return;const e=await fetch("https://cdn.ffzap.com/liriklive/emotes.json");if(e.ok){const t=await e.json();this.updateGlobalEmotes(t),this.updateSubscriberEmotes(t),this.updateRestrictedEmotes(t)}else{if(404===e.status)return;const s=(t||0)+1;s<12&&(this.log.error("Failed to fetch emotes. Trying again in 5 seconds."),setTimeout(this.updateEmotes.bind(this,s),5e3))}}}).enable()}]);
//# sourceMappingURL=demeter.js.map